"use strict";(self.webpackChunkdocs_sinpom=self.webpackChunkdocs_sinpom||[]).push([[9776],{8213:(e,o,s)=>{s.r(o),s.d(o,{assets:()=>c,contentTitle:()=>d,default:()=>u,frontMatter:()=>i,metadata:()=>r,toc:()=>t});const r=JSON.parse('{"id":"setup/reverse-proxy","title":"Proxy/Proxy Reverso","description":"O Traefik est\xe1 configurado para gerenciar o roteamento de tr\xe1fego com base em dom\xednios. Certifique-se de que o DNS ou o arquivo hosts aponta para os dom\xednios configurados.","source":"@site/docs/setup/reverse-proxy.md","sourceDirName":"setup","slug":"/setup/reverse-proxy","permalink":"/docs-sinpom/pt/docs/setup/reverse-proxy","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/setup/reverse-proxy.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"docSidebar","previous":{"title":"Migrations e seeds","permalink":"/docs-sinpom/pt/docs/setup/migrations-and-seeds"},"next":{"title":"Acessando o projeto","permalink":"/docs-sinpom/pt/docs/setup/access-project"}}');var n=s(4848),a=s(8453);const i={sidebar_position:4},d="Proxy/Proxy Reverso",c={},t=[{value:"Usando o Traefik com Docker",id:"usando-o-traefik-com-docker",level:2},{value:"Configurando o hosts",id:"configurando-o-hosts",level:2},{value:"<strong>Exemplo de edi\xe7\xe3o do Hosts no Ubuntu</strong>",id:"exemplo-de-edi\xe7\xe3o-do-hosts-no-ubuntu",level:3},{value:"<strong>Passo 1: Abrir o Arquivo de Hosts com Permiss\xf5es de Superusu\xe1rio</strong>",id:"passo-1-abrir-o-arquivo-de-hosts-com-permiss\xf5es-de-superusu\xe1rio",level:4},{value:"<strong>Passo 2: Editar o arquivo</strong>",id:"passo-2-editar-o-arquivo",level:4},{value:"<strong>Passo 3: Salvar e Fechar o Arquivo</strong>",id:"passo-3-salvar-e-fechar-o-arquivo",level:4},{value:"<strong>Passo Opcional: Limpar o Cache DNS (se necess\xe1rio)</strong>",id:"passo-opcional-limpar-o-cache-dns-se-necess\xe1rio",level:4}];function l(e){const o={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.header,{children:(0,n.jsx)(o.h1,{id:"proxyproxy-reverso",children:"Proxy/Proxy Reverso"})}),"\n",(0,n.jsx)(o.p,{children:"O Traefik est\xe1 configurado para gerenciar o roteamento de tr\xe1fego com base em dom\xednios. Certifique-se de que o DNS ou o arquivo hosts aponta para os dom\xednios configurados."}),"\n",(0,n.jsx)(o.h2,{id:"usando-o-traefik-com-docker",children:"Usando o Traefik com Docker"}),"\n",(0,n.jsx)(o.admonition,{type:"warning",children:(0,n.jsx)(o.p,{children:"O Traefik precisa ser executado em um container separado, fora do diret\xf3rio do sinpom."})}),"\n",(0,n.jsxs)(o.p,{children:["Voc\xea pode criar um arquivo ",(0,n.jsx)(o.code,{children:"docker-compose.yml"})," para configura\xe7\xe3o do Traefik, fora do diret\xf3rio do sinpom e ent\xe3o gerencia-lo com o Docker Compose."]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"# Saindo do diret\xf3rio do sinpom\ncd ../\n# Criando diret\xf3rio para o traefik\nmkdir traefik\ncd traefik\ntouch docker-compose.yml\ntouch dynamic.yml\n"})}),"\n",(0,n.jsxs)(o.p,{children:["Exemplo de arquivo ",(0,n.jsx)(o.code,{children:"docker-compose.yml"})," para configura\xe7\xe3o do Traefik:"]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-yaml",children:'networks:\n  proxy:\n    external: true\n\nservices:\n  traefik:\n    image: traefik:v2.10\n    container_name: sinpom-traefik\n    command:\n      - "--providers.docker=true"\n      - "--providers.docker.exposedbydefault=false"\n      - "--entrypoints.web.address=:80"\n      - "--entrypoints.websecure.address=:443"\n      - "--log.level=DEBUG"\n      - "--api.insecure=true"\n      - "--entrypoints.websecure.http.tls=true"\n      - "--providers.file.filename=/etc/traefik/dynamic.yml"\n    ports:\n      - "80:80"\n      - "443:443"\n      - "8099:8080"\n    volumes:\n      - "/var/run/docker.sock:/var/run/docker.sock:ro"\n      - "./certs:/certs"\n      - "./traefik-dynamic-config.yml:/etc/traefik/dynamic.yml"\n    networks:\n      - proxy\n'})}),"\n",(0,n.jsxs)(o.p,{children:["Use um arquivo ",(0,n.jsx)(o.code,{children:"dynamic.yml"})," para configura\xe7\xe3o do Traefik. Exemplo:"]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-yaml",children:"tls:\n  certificates:\n    - certFile: /certs/cert.cert\n      keyFile: /certs/cert.key\n"})}),"\n",(0,n.jsx)(o.h2,{id:"configurando-o-hosts",children:"Configurando o hosts"}),"\n",(0,n.jsx)(o.p,{children:"No arquivo de hosts do seu sistema operacional, adicione a seguinte linha:"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"127.0.0.1 sinpom.docker.localhost\n"})}),"\n",(0,n.jsx)(o.h3,{id:"exemplo-de-edi\xe7\xe3o-do-hosts-no-ubuntu",children:(0,n.jsx)(o.strong,{children:"Exemplo de edi\xe7\xe3o do Hosts no Ubuntu"})}),"\n",(0,n.jsxs)(o.p,{children:["O arquivo de ",(0,n.jsx)(o.strong,{children:"hosts"})," no Ubuntu \xe9 usado para mapear endere\xe7os IP a nomes de dom\xednio de forma local, sem a necessidade de configurar um servidor DNS."]}),"\n",(0,n.jsx)(o.h4,{id:"passo-1-abrir-o-arquivo-de-hosts-com-permiss\xf5es-de-superusu\xe1rio",children:(0,n.jsx)(o.strong,{children:"Passo 1: Abrir o Arquivo de Hosts com Permiss\xf5es de Superusu\xe1rio"})}),"\n",(0,n.jsxs)(o.p,{children:["O arquivo de hosts est\xe1 localizado em ",(0,n.jsx)(o.code,{children:"/etc/hosts"}),". Para edit\xe1-lo, voc\xea precisa de permiss\xf5es de administrador. Use o editor de texto de sua prefer\xeancia (neste exemplo, usamos ",(0,n.jsx)(o.code,{children:"nano"}),")."]}),"\n",(0,n.jsx)(o.p,{children:"Digite o seguinte comando no terminal:"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"sudo nano /etc/hosts\n"})}),"\n",(0,n.jsx)(o.h4,{id:"passo-2-editar-o-arquivo",children:(0,n.jsx)(o.strong,{children:"Passo 2: Editar o arquivo"})}),"\n",(0,n.jsx)(o.p,{children:"O conte\xfado do arquivo /etc/hosts ser\xe1 exibido no editor. Ele geralmente ter\xe1 esta apar\xeancia inicial:"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-plain",children:"127.0.0.1 localhost\n127.0.0.1 seu-host-local\n"})}),"\n",(0,n.jsx)(o.p,{children:"Adicione a entrada necess\xe1ria"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"127.0.0.1 sinpom.docker.localhost\n"})}),"\n",(0,n.jsx)(o.h4,{id:"passo-3-salvar-e-fechar-o-arquivo",children:(0,n.jsx)(o.strong,{children:"Passo 3: Salvar e Fechar o Arquivo"})}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"Ctrl + O\nEnter\nCtrl + X\n"})}),"\n",(0,n.jsx)(o.h4,{id:"passo-opcional-limpar-o-cache-dns-se-necess\xe1rio",children:(0,n.jsx)(o.strong,{children:"Passo Opcional: Limpar o Cache DNS (se necess\xe1rio)"})}),"\n",(0,n.jsx)(o.p,{children:"Se voc\xea tiver problemas para resolver o dom\xednio, limpe o cache de DNS. Para sistemas que usam o systemd-resolved, execute:"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"sudo systemctl restart systemd-resolved\n"})})]})}function u(e={}){const{wrapper:o}={...(0,a.R)(),...e.components};return o?(0,n.jsx)(o,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},8453:(e,o,s)=>{s.d(o,{R:()=>i,x:()=>d});var r=s(6540);const n={},a=r.createContext(n);function i(e){const o=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function d(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),r.createElement(a.Provider,{value:o},e.children)}}}]);